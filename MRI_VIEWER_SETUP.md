# MRI ë·°ì–´ ì„¤ì • ê°€ì´ë“œ

## ê°œìš”
ìœ ë°© MRI ì´ë¯¸ì§€ë¥¼ ì‹œê°í™”í•˜ê³  ì„¸ê·¸ë©˜í…Œì´ì…˜ì„ ì˜¤ë²„ë ˆì´í•  ìˆ˜ ìˆëŠ” ì›¹ ê¸°ë°˜ ë·°ì–´ì…ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥
- ğŸ” NIfTI íŒŒì¼(.nii.gz) ë¡œë“œ ë° ì‹œê°í™”
- ğŸ–±ï¸ ë§ˆìš°ìŠ¤ íœ ë¡œ ìŠ¬ë¼ì´ìŠ¤ íƒìƒ‰
- ğŸ“Š 3ê°€ì§€ ë‹¨ë©´ ë°©í–¥ (Axial, Sagittal, Coronal)
- ğŸ¨ ì„¸ê·¸ë©˜í…Œì´ì…˜ ì˜¤ë²„ë ˆì´ í‘œì‹œ
- ğŸ“‹ í™˜ì ì •ë³´ ë° ìŠ¤ìº” ë©”íƒ€ë°ì´í„° í‘œì‹œ
- ğŸ”„ ì—¬ëŸ¬ MRI ì‹œí€€ìŠ¤ ì§€ì›

## ì„¤ì¹˜ ë°©ë²•

### 1. ë°±ì—”ë“œ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
cd /Users/nogeon-u/Desktop/ê±´ì–‘ëŒ€_ë°”ì´ì˜¤ë©”ë””ì»¬/Django/Django-React--main/backend

# ê°€ìƒí™˜ê²½ í™œì„±í™”
source venv/bin/activate

# í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install nibabel==5.2.0
pip install SimpleITK==2.3.1
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
python manage.py migrate mri_viewer

# ë˜ëŠ” ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜
python manage.py migrate
```

### 3. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
# Django ì„œë²„ ì‹¤í–‰
python manage.py runserver 0.0.0.0:5000
```

### 4. í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
# ìƒˆ í„°ë¯¸ë„ì—ì„œ
cd /Users/nogeon-u/Desktop/ê±´ì–‘ëŒ€_ë°”ì´ì˜¤ë©”ë””ì»¬/Django/Django-React--main/frontend

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

## ì‚¬ìš© ë°©ë²•

### 1. ë¡œê·¸ì¸
- ì˜ë£Œì§„ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•©ë‹ˆë‹¤.
- ì—­í• : `medical_staff` ë˜ëŠ” `superuser`

### 2. MRI ë·°ì–´ ì ‘ê·¼
- ì‚¬ì´ë“œë°”ì—ì„œ "MRI ì´ë¯¸ì§€" ë©”ë‰´ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
- ë˜ëŠ” ì§ì ‘ URL: `http://localhost:5173/mri-viewer`

### 3. í™˜ì ì„ íƒ
- ë“œë¡­ë‹¤ìš´ì—ì„œ í™˜ìë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
- í˜„ì¬ ë°ì´í„°: `ISPY2_100899`

### 4. ì´ë¯¸ì§€ íƒìƒ‰
- **ë§ˆìš°ìŠ¤ íœ **: ìŠ¬ë¼ì´ìŠ¤ ì´ë™ (ìœ„/ì•„ë˜)
- **ìŠ¬ë¼ì´ë”**: íŠ¹ì • ìŠ¬ë¼ì´ìŠ¤ë¡œ ì´ë™
- **ë²„íŠ¼**: ì´ì „/ë‹¤ìŒ, Â±10 ìŠ¬ë¼ì´ìŠ¤ ì´ë™

### 5. ë·°ì–´ ì„¤ì •
- **ì‹œí€€ìŠ¤ ì„ íƒ**: ë‹¤ë¥¸ MRI ì‹œí€€ìŠ¤ ì„ íƒ (0000~0005)
- **ë‹¨ë©´ ë°©í–¥**: Axial, Sagittal, Coronal ì„ íƒ
- **ì„¸ê·¸ë©˜í…Œì´ì…˜**: í† ê¸€ë¡œ ì¢…ì–‘ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¹€

## API ì—”ë“œí¬ì¸íŠ¸

### í™˜ì ëª©ë¡ ì¡°íšŒ
```
GET /api/mri/patients/
```

### í™˜ì ì •ë³´ ì¡°íšŒ
```
GET /api/mri/patients/{patient_id}/
```

### ìŠ¬ë¼ì´ìŠ¤ ì´ë¯¸ì§€ ì¡°íšŒ
```
GET /api/mri/patients/{patient_id}/slice/?series=0&slice=50&axis=axial&segmentation=true
```

### ë³¼ë¥¨ ì •ë³´ ì¡°íšŒ
```
GET /api/mri/patients/{patient_id}/volume/
```

## ë°ì´í„° êµ¬ì¡°

```
/Users/nogeon-u/Desktop/ê±´ì–‘ëŒ€_ë°”ì´ì˜¤ë©”ë””ì»¬/Django/mmm/
â”œâ”€â”€ images/
â”‚   â””â”€â”€ ISPY2_100899/
â”‚       â”œâ”€â”€ ispy2_100899_0000.nii.gz  (MRI ì‹œí€€ìŠ¤ 1)
â”‚       â”œâ”€â”€ ispy2_100899_0001.nii.gz  (MRI ì‹œí€€ìŠ¤ 2)
â”‚       â”œâ”€â”€ ...
â”‚       â””â”€â”€ ispy2_100899_0005.nii.gz  (MRI ì‹œí€€ìŠ¤ 6)
â”œâ”€â”€ segmentations/
â”‚   â”œâ”€â”€ automatic/
â”‚   â”‚   â””â”€â”€ ispy2_100899.nii.gz  (ìë™ ì„¸ê·¸ë©˜í…Œì´ì…˜)
â”‚   â””â”€â”€ expert/
â”‚       â””â”€â”€ ispy2_100899.nii.gz  (ì „ë¬¸ê°€ ì„¸ê·¸ë©˜í…Œì´ì…˜)
â””â”€â”€ patient_info_files/
    â””â”€â”€ ispy2_100899.json  (í™˜ì ì •ë³´)
```

## í™˜ì ì •ë³´ ì˜ˆì‹œ

```json
{
    "patient_id": "ISPY2_100899",
    "clinical_data": {
        "age": 53,
        "menopausal_status": "post",
        "breast_density": ""
    },
    "primary_lesion": {
        "pcr": 0,
        "tumor_subtype": "triple_negative",
        "breast_coordinates": {
            "x_min": 1, "x_max": 78,
            "y_min": 1, "y_max": 227,
            "z_min": 3, "z_max": 254
        }
    },
    "imaging_data": {
        "scanner_manufacturer": "GE",
        "scanner_model": "Signa HDxt",
        "field_strength": 1.5
    }
}
```

## ì¶”ê°€ í™˜ì ë°ì´í„° ì¶”ê°€ ë°©ë²•

### 1. ë°ì´í„° ì¤€ë¹„
ìƒˆë¡œìš´ í™˜ì ë°ì´í„°ë¥¼ ë‹¤ìŒ êµ¬ì¡°ë¡œ ì¤€ë¹„í•©ë‹ˆë‹¤:

```
mmm/
â”œâ”€â”€ images/
â”‚   â””â”€â”€ PATIENT_ID/
â”‚       â””â”€â”€ *.nii.gz
â”œâ”€â”€ segmentations/
â”‚   â””â”€â”€ expert/
â”‚       â””â”€â”€ patient_id.nii.gz
â””â”€â”€ patient_info_files/
    â””â”€â”€ patient_id.json
```

### 2. ìë™ ì¸ì‹
- ë°±ì—”ë“œ APIê°€ ìë™ìœ¼ë¡œ ìƒˆ í™˜ìë¥¼ ì¸ì‹í•©ë‹ˆë‹¤.
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í™˜ì ëª©ë¡ì´ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

## ë¬¸ì œ í•´ê²°

### 1. ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ
- ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
- ë°ì´í„° ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- ì½˜ì†”ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

### 2. ì„¸ê·¸ë©˜í…Œì´ì…˜ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ
- `segmentations/expert/` ë””ë ‰í† ë¦¬ì— íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
- íŒŒì¼ëª…ì´ `{patient_id}.nii.gz` í˜•ì‹ì¸ì§€ í™•ì¸

### 3. CORS ì—ëŸ¬
- `backend/eventeye/settings.py`ì˜ CORS ì„¤ì • í™•ì¸
- í”„ë¡ íŠ¸ì—”ë“œ URLì´ í—ˆìš© ëª©ë¡ì— ìˆëŠ”ì§€ í™•ì¸

## í–¥í›„ ê°œì„  ì‚¬í•­

### 1. Orthanc ì„œë²„ í†µí•©
- DICOM íŒŒì¼ ì§ì ‘ ì§€ì›
- PACS ì‹œìŠ¤í…œ ì—°ë™
- ì‹¤ì‹œê°„ ì´ë¯¸ì§€ ìŠ¤íŠ¸ë¦¬ë°

### 2. ê³ ê¸‰ ì‹œê°í™”
- 3D ë³¼ë¥¨ ë Œë”ë§
- MPR (Multi-Planar Reconstruction)
- ì¸¡ì • ë„êµ¬ (ê±°ë¦¬, ë©´ì , ë¶€í”¼)

### 3. AI ë¶„ì„ í†µí•©
- ì‹¤ì‹œê°„ ì„¸ê·¸ë©˜í…Œì´ì…˜
- ë³‘ë³€ ìë™ íƒì§€
- ì§„ë‹¨ ë³´ì¡° ê¸°ëŠ¥

### 4. í˜‘ì—… ê¸°ëŠ¥
- ì£¼ì„ ë° ì½”ë©˜íŠ¸
- ì¼€ì´ìŠ¤ ê³µìœ 
- ë‹¤í•™ì œ íšŒì˜ ì§€ì›

## ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- Django 4.2.7
- Django REST Framework
- nibabel (NIfTI íŒŒì¼ ì²˜ë¦¬)
- SimpleITK (ì˜ë£Œ ì˜ìƒ ì²˜ë¦¬)
- NumPy, Pillow

### í”„ë¡ íŠ¸ì—”ë“œ
- React 18
- TypeScript
- Tailwind CSS
- shadcn/ui
- React Router

## ì°¸ê³  ìë£Œ

- [NIfTI íŒŒì¼ í˜•ì‹](https://nifti.nimh.nih.gov/)
- [nibabel ë¬¸ì„œ](https://nipy.org/nibabel/)
- [SimpleITK ê°€ì´ë“œ](https://simpleitk.readthedocs.io/)
- [Orthanc DICOM ì„œë²„](https://www.orthanc-server.com/)

## ë¼ì´ì„ ìŠ¤
ì´ í”„ë¡œì íŠ¸ëŠ” ì˜ë£Œ ì—°êµ¬ ë° êµìœ¡ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

